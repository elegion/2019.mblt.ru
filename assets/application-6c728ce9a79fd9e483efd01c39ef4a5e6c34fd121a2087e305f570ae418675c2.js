(function(){var e=this;(function(){(function(){this.Rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:{selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",formEnableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]"}}).call(this)}).call(e);var t=e.Rails;(function(){(function(){var e,n;n=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,t.matches=function(e,t){return null!=t.exclude?n.call(e,t.selector)&&!n.call(e,t.exclude):n.call(e,t)},e="_ujsData",t.getData=function(t,n){var o;return null!=(o=t[e])?o[n]:void 0},t.setData=function(t,n,o){return null==t[e]&&(t[e]={}),t[e][n]=o},t.$=function(e){return Array.prototype.slice.call(document.querySelectorAll(e))}}).call(this),function(){var e,n,o;e=t.$,o=t.csrfToken=function(){var e;return(e=document.querySelector("meta[name=csrf-token]"))&&e.content},n=t.csrfParam=function(){var e;return(e=document.querySelector("meta[name=csrf-param]"))&&e.content},t.CSRFProtection=function(e){var t;if(null!=(t=o()))return e.setRequestHeader("X-CSRF-Token",t)},t.refreshCSRFTokens=function(){var t,a;if(a=o(),t=n(),null!=a&&null!=t)return e('form input[name="'+t+'"]').forEach(function(e){return e.value=a})}}.call(this),function(){var e,n,o;o=t.matches,e=window.CustomEvent,"function"!=typeof e&&(e=function(e,t){var n;return n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},e.prototype=window.Event.prototype),n=t.fire=function(t,n,o){var a;return a=new e(n,{bubbles:!0,cancelable:!0,detail:o}),t.dispatchEvent(a),!a.defaultPrevented},t.stopEverything=function(e){return n(e.target,"ujs:everythingStopped"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},t.delegate=function(e,t,n,a){return e.addEventListener(n,function(e){var n;for(n=e.target;n instanceof Element&&!o(n,t);)n=n.parentNode;if(n instanceof Element&&!1===a.call(n,e))return e.preventDefault(),e.stopPropagation()})}}.call(this),function(){var e,n,o,a,i;n=t.CSRFProtection,t.fire,e={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},t.ajax=function(e){var t;return e=a(e),t=o(e,function(){var n;return n=i(t.response,t.getResponseHeader("Content-Type")),2===Math.floor(t.status/100)?"function"==typeof e.success&&e.success(n,t.statusText,t):"function"==typeof e.error&&e.error(n,t.statusText,t),"function"==typeof e.complete?e.complete(t,t.statusText):void 0}),!("function"!=typeof e.beforeSend||!e.beforeSend(t,e))&&(t.readyState===XMLHttpRequest.OPENED?t.send(e.data):void 0)},a=function(t){return t.url=t.url||location.href,t.type=t.type.toUpperCase(),"GET"===t.type&&t.data&&(t.url.indexOf("?")<0?t.url+="?"+t.data:t.url+="&"+t.data),null==e[t.dataType]&&(t.dataType="*"),t.accept=e[t.dataType],"*"!==t.dataType&&(t.accept+=", */*; q=0.01"),t},o=function(e,t){var o;return o=new XMLHttpRequest,o.open(e.type,e.url,!0),o.setRequestHeader("Accept",e.accept),"string"==typeof e.data&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),n(o),o.withCredentials=!!e.withCredentials,o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE)return t(o)},o},i=function(e,t){var n,o;if("string"==typeof e&&"string"==typeof t)if(t.match(/\bjson\b/))try{e=JSON.parse(e)}catch(e){}else if(t.match(/\b(?:java|ecma)script\b/))o=document.createElement("script"),o.text=e,document.head.appendChild(o).parentNode.removeChild(o);else if(t.match(/\b(xml|html|svg)\b/)){n=new DOMParser,t=t.replace(/;.+/,"");try{e=n.parseFromString(e,t)}catch(e){}}return e},t.href=function(e){return e.href},t.isCrossDomain=function(e){var t,n;t=document.createElement("a"),t.href=location.href,n=document.createElement("a");try{return n.href=e,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(e){return e,!0}}}.call(this),function(){var e,n;e=t.matches,n=function(e){return Array.prototype.slice.call(e)},t.serializeElement=function(t,o){var a,i;return a=[t],e(t,"form")&&(a=n(t.elements)),i=[],a.forEach(function(t){if(t.name&&!t.disabled)return e(t,"select")?n(t.options).forEach(function(e){if(e.selected)return i.push({name:t.name,value:e.value})}):t.checked||-1===["radio","checkbox","submit"].indexOf(t.type)?i.push({name:t.name,value:t.value}):void 0}),o&&i.push(o),i.map(function(e){return null!=e.name?encodeURIComponent(e.name)+"="+encodeURIComponent(e.value):e}).join("&")},t.formElements=function(t,o){return e(t,"form")?n(t.elements).filter(function(t){return e(t,o)}):n(t.querySelectorAll(o))}}.call(this),function(){var e,n,o;n=t.fire,o=t.stopEverything,t.handleConfirm=function(t){if(!e(this))return o(t)},e=function(e){var t,o,a;if(!(a=e.getAttribute("data-confirm")))return!0;if(t=!1,n(e,"confirm")){try{t=confirm(a)}catch(e){}o=n(e,"confirm:complete",[t])}return t&&o}}.call(this),function(){var e,n,o,a,i,r,s,c,l,u,d;l=t.matches,c=t.getData,u=t.setData,d=t.stopEverything,s=t.formElements,t.handleDisabledElement=function(e){var t;if(t=this,t.disabled)return d(e)},t.enableElement=function(e){var n;return n=e instanceof Event?e.target:e,l(n,t.linkDisableSelector)?r(n):l(n,t.buttonDisableSelector)||l(n,t.formEnableSelector)?a(n):l(n,t.formSubmitSelector)?i(n):void 0},t.disableElement=function(a){var i;return i=a instanceof Event?a.target:a,l(i,t.linkDisableSelector)?o(i):l(i,t.buttonDisableSelector)||l(i,t.formDisableSelector)?e(i):l(i,t.formSubmitSelector)?n(i):void 0},o=function(e){var t;return t=e.getAttribute("data-disable-with"),null!=t&&(u(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t),e.addEventListener("click",d),u(e,"ujs:disabled",!0)},r=function(e){var t;return t=c(e,"ujs:enable-with"),null!=t&&(e.innerHTML=t,u(e,"ujs:enable-with",null)),e.removeEventListener("click",d),u(e,"ujs:disabled",null)},n=function(n){return s(n,t.formDisableSelector).forEach(e)},e=function(e){var t;return t=e.getAttribute("data-disable-with"),null!=t&&(l(e,"button")?(u(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t):(u(e,"ujs:enable-with",e.value),e.value=t)),e.disabled=!0,u(e,"ujs:disabled",!0)},i=function(e){return s(e,t.formEnableSelector).forEach(a)},a=function(e){var t;return t=c(e,"ujs:enable-with"),null!=t&&(l(e,"button")?e.innerHTML=t:e.value=t,u(e,"ujs:enable-with",null)),e.disabled=!1,u(e,"ujs:disabled",null)}}.call(this),function(){var e;e=t.stopEverything,t.handleMethod=function(n){var o,a,i,r,s,c,l;if(c=this,l=c.getAttribute("data-method"))return s=t.href(c),a=t.csrfToken(),o=t.csrfParam(),i=document.createElement("form"),r="<input name='_method' value='"+l+"' type='hidden' />",null==o||null==a||t.isCrossDomain(s)||(r+="<input name='"+o+"' value='"+a+"' type='hidden' />"),r+='<input type="submit" />',i.method="post",i.action=s,i.target=c.target,i.innerHTML=r,i.style.display="none",document.body.appendChild(i),i.querySelector('[type="submit"]').click(),e(n)}}.call(this),function(){var e,n,o,a,i,r,s,c,l,u=[].slice;r=t.matches,o=t.getData,c=t.setData,n=t.fire,l=t.stopEverything,e=t.ajax,a=t.isCrossDomain,s=t.serializeElement,i=function(e){var t;return null!=(t=e.getAttribute("data-remote"))&&"false"!==t},t.handleRemote=function(d){var p,f,m,h,v,g,b;return h=this,!i(h)||(n(h,"ajax:before")?(b=h.getAttribute("data-with-credentials"),m=h.getAttribute("data-type")||"script",r(h,t.formSubmitSelector)?(p=o(h,"ujs:submit-button"),v=o(h,"ujs:submit-button-formmethod")||h.method,g=o(h,"ujs:submit-button-formaction")||h.getAttribute("action")||location.href,"GET"===v.toUpperCase()&&(g=g.replace(/\?.*$/,"")),"multipart/form-data"===h.enctype?(f=new FormData(h),null!=p&&f.append(p.name,p.value)):f=s(h,p),c(h,"ujs:submit-button",null),c(h,"ujs:submit-button-formmethod",null),c(h,"ujs:submit-button-formaction",null)):r(h,t.buttonClickSelector)||r(h,t.inputChangeSelector)?(v=h.getAttribute("data-method"),g=h.getAttribute("data-url"),f=s(h,h.getAttribute("data-params"))):(v=h.getAttribute("data-method"),g=t.href(h),f=h.getAttribute("data-params")),e({type:v||"GET",url:g,data:f,dataType:m,beforeSend:function(e,t){return n(h,"ajax:beforeSend",[e,t])?n(h,"ajax:send",[e]):(n(h,"ajax:stopped"),!1)},success:function(){var e;return e=1<=arguments.length?u.call(arguments,0):[],n(h,"ajax:success",e)},error:function(){var e;return e=1<=arguments.length?u.call(arguments,0):[],n(h,"ajax:error",e)},complete:function(){var e;return e=1<=arguments.length?u.call(arguments,0):[],n(h,"ajax:complete",e)},crossDomain:a(g),withCredentials:null!=b&&"false"!==b}),l(d)):(n(h,"ajax:stopped"),!1))},t.formSubmitButtonClick=function(){var e,t;if(e=this,t=e.form)return e.name&&c(t,"ujs:submit-button",{name:e.name,value:e.value}),c(t,"ujs:formnovalidate-button",e.formNoValidate),c(t,"ujs:submit-button-formaction",e.getAttribute("formaction")),c(t,"ujs:submit-button-formmethod",e.getAttribute("formmethod"))},t.handleMetaClick=function(e){var t,n,o;if(n=this,o=(n.getAttribute("data-method")||"GET").toUpperCase(),t=n.getAttribute("data-params"),(e.metaKey||e.ctrlKey)&&"GET"===o&&!t)return e.stopImmediatePropagation()}}.call(this),function(){var e,n,o,a,i,r,s,c,l,u,d,p,f,m;r=t.fire,o=t.delegate,c=t.getData,e=t.$,m=t.refreshCSRFTokens,n=t.CSRFProtection,i=t.enableElement,a=t.disableElement,u=t.handleDisabledElement,l=t.handleConfirm,f=t.handleRemote,s=t.formSubmitButtonClick,d=t.handleMetaClick,p=t.handleMethod,"undefined"==typeof jQuery||null===jQuery||null==jQuery.ajax||jQuery.rails||(jQuery.rails=t,jQuery.ajaxPrefilter(function(e,t,o){if(!e.crossDomain)return n(o)})),t.start=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",function(){return e(t.formEnableSelector).forEach(function(e){if(c(e,"ujs:disabled"))return i(e)}),e(t.linkDisableSelector).forEach(function(e){if(c(e,"ujs:disabled"))return i(e)})}),o(document,t.linkDisableSelector,"ajax:complete",i),o(document,t.linkDisableSelector,"ajax:stopped",i),o(document,t.buttonDisableSelector,"ajax:complete",i),o(document,t.buttonDisableSelector,"ajax:stopped",i),o(document,t.linkClickSelector,"click",u),o(document,t.linkClickSelector,"click",l),o(document,t.linkClickSelector,"click",d),o(document,t.linkClickSelector,"click",a),o(document,t.linkClickSelector,"click",f),o(document,t.linkClickSelector,"click",p),o(document,t.buttonClickSelector,"click",u),o(document,t.buttonClickSelector,"click",l),o(document,t.buttonClickSelector,"click",a),o(document,t.buttonClickSelector,"click",f),o(document,t.inputChangeSelector,"change",u),o(document,t.inputChangeSelector,"change",l),o(document,t.inputChangeSelector,"change",f),o(document,t.formSubmitSelector,"submit",u),o(document,t.formSubmitSelector,"submit",l),o(document,t.formSubmitSelector,"submit",f),o(document,t.formSubmitSelector,"submit",function(e){return setTimeout(function(){return a(e)},13)}),o(document,t.formSubmitSelector,"ajax:send",a),o(document,t.formSubmitSelector,"ajax:complete",i),o(document,t.formInputClickSelector,"click",u),o(document,t.formInputClickSelector,"click",l),o(document,t.formInputClickSelector,"click",s),document.addEventListener("DOMContentLoaded",m),window._rails_loaded=!0},window.Rails===t&&r(document,"rails:attachBindings")&&t.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd&&define(t)}).call(this),function(e,t){"use strict";t(document).ready(function(){var n=t(".js-runetid-login");e.rIDAsyncInit=function(){rID.init({apiKey:e.RUNET_ID_KEY,backUrl:n.data("backurl")})},function(e){var t,n="runetid-jssdk",o=e.getElementsByTagName("script")[0];e.getElementById(n)||(t=e.createElement("script"),t.id=n,t.async=!0,t.src="javascripts/api/runetid.js",o.parentNode.insertBefore(t,o))}(document),n.on("click",function(e){e.preventDefault(),rID.login()})})}(window,jQuery),function(){function e(){var e=$("#map-contacts"),t=e.data("lat"),n=e.data("lng"),o=[{featureType:"all",stylers:[{hue:"#000000"},{lightness:-70},{saturation:-100}]},{featureType:"poi.attraction",elementType:"all",stylers:[{visibility:"off"}]}],a=new google.maps.StyledMapType(o,{name:"mblt"}),i={zoom:16,scrollwheel:!1,center:new google.maps.LatLng(t,n),disableDefaultUI:!1,disableDoubleClickZoom:!0,fullscreenControl:!1,mapTypeControl:!1,panControl:!1,rotateControl:!1,scaleControl:!1,streetViewControl:!1,zoomControl:!0,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"mblt"]}},r=new google.maps.Map(e.get(0),i);new google.maps.Marker({map:r,position:new google.maps.LatLng(t,n),icon:window.MAP_PIN_SRC});r.mapTypes.set("mblt",a),r.setMapTypeId("mblt")}window.initMap=e}(),$(function(){function e(e){e.preventDefault(),$(this).blur();var t=$(this).closest(".faq__item"),n=t.find(".faq__item__answer");t.toggleClass("open"),t.hasClass("open")?n.slideDown():n.slideUp()}$(".faq__item__answer").hide(),$(".faq__item__switch").on("click",e)}),$(function(){function e(e){function n(){e.on("oanimationend animationend webkitAnimationEnd",a)}function a(){r=$(window).scrollTop(),$("body").on("click",{modal:e},t),$("body").addClass(i),e.off("oanimationend animationend webkitAnimationEnd",a)}n(),e.addClass(o)}function t(e){n(e.data.modal)}function n(e){function n(){e.on("oanimationend animationend webkitAnimationEnd",s)}function s(t){$(t.target).hasClass(o)&&(e.removeClass(o).removeClass(a),e.off("oanimationend animationend webkitAnimationEnd",s))}n(),e.addClass(a),e.trigger("hidden.modal"),$("body").off("click",t),$("body").removeClass(i),$(window).scrollTop(r)}var o="modal_open",a="modal_closing",i="scroll-lock",r=0;$(".modal__content").click(function(e){e.stopPropagation()}),$(".modal").scroll(function(e){e.stopPropagation()}),$(document).keyup(function(e){27===e.keyCode&&$(".modal."+o).each(function(){n($(this))})}),$(".js-modal-switch").click(function(t){t.preventDefault(),t.stopPropagation();var n=$(this).data("target"),o=$(n);o.length&&e(o)}),$(".modal__close").click(function(e){e.preventDefault(),$modal=$(this).closest(".modal"),n($modal)}),window._mblt_openModal=e,window._mblt_closeModal=n}),function(e,t,n,o){"use strict";e.fn.pagepiling=function(a){function i(e){e.addClass("pp-table").wrapInner('<div class="pp-tableCell" style="height:100%" />')}function r(t){return e(".pp-section.active").index(".pp-section")>t.index(".pp-section")?"up":"down"}function s(t,n){var o={destination:t,animated:n,activeSection:e(".pp-section.active"),anchorLink:t.data("anchor"),sectionIndex:t.index(".pp-section"),toMove:t,yMovement:r(t),leavingSection:e(".pp-section.active").index(".pp-section")+1};if(!o.activeSection.is(t)){"undefined"==typeof o.animated&&(o.animated=!0),"undefined"!=typeof o.anchorLink&&f(o.anchorLink,o.sectionIndex),o.destination.addClass("active").siblings().removeClass("active"),o.sectionsToMove=u(o),"down"===o.yMovement?(o.translate3d=N(),o.scrolling="-100%",V.css3||o.sectionsToMove.each(function(t){t!=o.activeSection.index(".pp-section")&&e(this).css(p(o.scrolling))}),o.animateSection=o.activeSection):(o.translate3d="translate3d(0px, 0px, 0px)",o.scrolling="0",o.animateSection=t),e.isFunction(V.onLeave)&&V.onLeave.call(this,o.leavingSection,o.sectionIndex+1,o.yMovement),c(o),R(o.anchorLink),O(o.anchorLink,o.sectionIndex),W=o.anchorLink;var a=(new Date).getTime();H=a}}function c(t){V.css3?(y(t.animateSection,t.translate3d,t.animated),t.sectionsToMove.each(function(){y(e(this),t.translate3d,t.animated)}),setTimeout(function(){l(t)},V.scrollingSpeed)):(t.scrollOptions=p(t.scrolling),t.animated?t.animateSection.animate(t.scrollOptions,V.scrollingSpeed,V.easing,function(){d(t),l(t)}):(t.animateSection.css(p(t.scrolling)),setTimeout(function(){d(t),l(t)},400)))}function l(t){e.isFunction(V.afterLoad)&&V.afterLoad.call(this,t.anchorLink,t.sectionIndex+1)}function u(t){return"down"===t.yMovement?e(".pp-section").map(function(n){if(n<t.destination.index(".pp-section"))return e(this)}):e(".pp-section").map(function(n){if(n>t.destination.index(".pp-section"))return e(this)})}function d(t){"up"===t.yMovement&&t.sectionsToMove.each(function(){e(this).css(p(t.scrolling))})}function p(e){return"vertical"===V.direction?{top:e}:{left:e}}function f(e,t){V.anchors.length?(location.hash=e,m(location.hash)):m(String(t))}function m(t){t=t.replace("#",""),e("body")[0].className=e("body")[0].className.replace(/\b\s?pp-viewing-[^\s]+\b/g,""),e("body").addClass("pp-viewing-"+t)}function h(){var o=n.location.hash.replace("#",""),a=o,i=e(t).find('.pp-section[data-anchor="'+a+'"]');i.length>0&&s(i,V.animateAnchor)}function v(){return(new Date).getTime()-H<G+V.scrollingSpeed}function g(){var o=n.location.hash.replace("#","").split("index-2.html"),a=o[0];if(a.length&&a&&a!==W){var i;i=isNaN(a)?e(t).find('[data-anchor="'+a+'"]'):e(".pp-section").eq(a-1),s(i)}}function b(e){return{"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,transform:e}}function y(e,t,n){e.toggleClass("pp-easing",n),e.css(b(t))}function w(t){var o=(new Date).getTime();t=t||n.event;var a=t.wheelDelta||-t.deltaY||-t.detail,i=Math.max(-1,Math.min(1,a)),r="undefined"!=typeof t.wheelDeltaX||"undefined"!=typeof t.deltaX,s=Math.abs(t.wheelDeltaX)<Math.abs(t.wheelDelta)||Math.abs(t.deltaX)<Math.abs(t.deltaY)||!r;Y.length>149&&Y.shift(),Y.push(Math.abs(a));var c=o-J;if(J=o,c>200&&(Y=[]),!v()){var l=e(".pp-section.active"),u=x(l);return C(Y,10)>=C(Y,70)&&s&&(i<0?S("down",u):i>0&&S("up",u)),!1}}function C(e,t){for(var n=0,o=e.slice(Math.max(e.length-t,1)),a=0;a<o.length;a++)n+=o[a];return Math.ceil(n/t)}function S(e,t){var n,o;if("down"==e?(n="bottom",o=U.moveSectionDown):(n="top",o=U.moveSectionUp),t.length>0){if(!j(n,t))return!0;o()}else o()}function j(e,t){return"top"===e?!t.scrollTop():"bottom"===e?t.scrollTop()+1+t.innerHeight()>=t[0].scrollHeight:void 0}function x(e){return e.filter(".pp-scrollable")}function k(){F.get(0).addEventListener?(F.get(0).removeEventListener("mousewheel",w,!1),F.get(0).removeEventListener("wheel",w,!1)):F.get(0).detachEvent("onmousewheel",w)}function E(){F.get(0).addEventListener?(F.get(0).addEventListener("mousewheel",w,!1),F.get(0).addEventListener("wheel",w,!1)):F.get(0).attachEvent("onmousewheel",w)}function T(){if(z){var e=_();F.off("touchstart "+e.down).on("touchstart "+e.down,P),F.off("touchmove "+e.move).on("touchmove "+e.move,A)}}function $(){if(z){var e=_();F.off("touchstart "+e.down),F.off("touchmove "+e.move)}}function _(){return n.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp"}}function D(e){var t=new Array;return t.y="undefined"!=typeof e.pageY&&(e.pageY||e.pageX)?e.pageY:e.touches[0].pageY,t.x="undefined"!=typeof e.pageX&&(e.pageY||e.pageX)?e.pageX:e.touches[0].pageX,t}function M(e){return"undefined"==typeof e.pointerType||"mouse"!=e.pointerType}function P(e){var t=e.originalEvent;if(M(t)){var n=D(t);Q=n.y,X=n.x}}function A(t){var n=t.originalEvent;if(!I(t.target)&&M(n)){var o=e(".pp-section.active"),a=x(o);if(a.length||t.preventDefault(),!v()){var i=D(n);B=i.y,K=i.x,"horizontal"===V.direction&&Math.abs(X-K)>Math.abs(Q-B)?Math.abs(X-K)>F.width()/100*V.touchSensitivity&&(X>K?S("down",a):K>X&&S("up",a)):Math.abs(Q-B)>F.height()/100*V.touchSensitivity&&(Q>B?S("down",a):B>Q&&S("up",a))}}}function I(t,n){n=n||0;var o=e(t).parent();return!!(n<V.normalScrollElementTouchThreshold&&o.is(V.normalScrollElements))||n!=V.normalScrollElementTouchThreshold&&I(o,++n)}function L(){e("body").append('<div id="pp-nav"><ul></ul></div>');var t=e("#pp-nav");t.css("color",V.navigation.textColor),t.addClass(V.navigation.position);for(var n=0;n<e(".pp-section").length;n++){var o="";if(V.anchors.length&&(o=V.anchors[n]),"undefined"!==V.navigation.tooltips){var a=V.navigation.tooltips[n];void 0===a&&(a="")}t.find("ul").append('<li data-tooltip="'+a+'"><a href="#'+o+'"><span></span></a></li>')}t.find("span").css("border-color",V.navigation.bulletsColor)}function O(t,n){V.navigation&&(e("#pp-nav").find(".active").removeClass("active"),t?e("#pp-nav").find('a[href="#'+t+'"]').addClass("active"):e("#pp-nav").find("li").eq(n).find("a").addClass("active"))}function R(t){V.menu&&(e(V.menu).find(".active").removeClass("active"),e(V.menu).find('[data-menuanchor="'+t+'"]').addClass("active"))}function q(){var e,a=t.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};t.body.insertBefore(a,null);for(var r in i)a.style[r]!==o&&(a.style[r]="translate3d(1px,1px,1px)",e=n.getComputedStyle(a).getPropertyValue(i[r]));return t.body.removeChild(a),e!==o&&e.length>0&&"none"!==e}function N(){return"vertical"!==V.direction?"translate3d(-100%, 0px, 0px)":"translate3d(0px, -100%, 0px)"}var W,U=e.fn.pagepiling,F=e(this),H=0,z="ontouchstart"in n||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints,Q=0,X=0,B=0,K=0,Y=[],G=600,V=e.extend(!0,{direction:"vertical",menu:null,verticalCentered:!0,sectionsColor:[],anchors:[],scrollingSpeed:700,easing:"easeInQuart",loopBottom:!1,loopTop:!1,css3:!0,navigation:{textColor:"#000",bulletsColor:"#000",position:"right",tooltips:[]},normalScrollElements:null,normalScrollElementTouchThreshold:5,touchSensitivity:5,keyboardScrolling:!0,sectionSelector:".section",animateAnchor:!1,afterLoad:null,onLeave:null,afterRender:null},a);e.extend(e.easing,{easeInQuart:function(e,t,n,o,a){return o*(t/=a)*t*t*t+n}}),U.setScrollingSpeed=function(e){V.scrollingSpeed=e},U.setMouseWheelScrolling=function(e){e?E():k()},U.setAllowScrolling=function(e){e?(U.setMouseWheelScrolling(!0),T()):(U.setMouseWheelScrolling(!1),$())},U.setKeyboardScrolling=function(e){V.keyboardScrolling=e},U.moveSectionUp=function(){var t=e(".pp-section.active").prev(".pp-section");!t.length&&V.loopTop&&(t=e(".pp-section").last()),t.length&&s(t)},U.moveSectionDown=function(){var t=e(".pp-section.active").next(".pp-section");!t.length&&V.loopBottom&&(t=e(".pp-section").first()),t.length&&s(t)},U.moveTo=function(n){var o="";o=isNaN(n)?e(t).find('[data-anchor="'+n+'"]'):e(".pp-section").eq(n-1),o.length>0&&s(o)},e(V.sectionSelector).each(function(){e(this).addClass("pp-section")}),V.css3&&(V.css3=q()),e(F).css({overflow:"hidden","-ms-touch-action":"none","touch-action":"none"}),U.setAllowScrolling(!0),e.isEmptyObject(V.navigation)||L();var Z=e(".pp-section").length;e(".pp-section").each(function(t){e(this).data("data-index",t),e(this).css("z-index",Z),t||0!==e(".pp-section.active").length||e(this).addClass("active"),"undefined"!=typeof V.anchors[t]&&e(this).attr("data-anchor",V.anchors[t]),"undefined"!=typeof V.sectionsColor[t]&&e(this).css("background-color",V.sectionsColor[t]),V.verticalCentered&&!e(this).hasClass("pp-scrollable")&&i(e(this)),Z-=1}).promise().done(function(){V.navigation&&(e("#pp-nav").css("margin-top","-"+e("#pp-nav").height()/2+"px"),e("#pp-nav").find("li").eq(e(".pp-section.active").index(".pp-section")).find("a").addClass("active")),e(n).on("load",function(){h()}),e.isFunction(V.afterRender)&&V.afterRender.call(this)}),e(n).on("hashchange",g),e(t).keydown(function(t){if(V.keyboardScrolling&&!v())switch(t.which){case 38:case 33:U.moveSectionUp();break;case 40:case 34:U.moveSectionDown();break;case 36:U.moveTo(1);break;case 35:U.moveTo(e(".pp-section").length);break;case 37:U.moveSectionUp();break;case 39:U.moveSectionDown();break;default:return}}),V.normalScrollElements&&(e(t).on("mouseenter",V.normalScrollElements,function(){U.setMouseWheelScrolling(!1)}),e(t).on("mouseleave",V.normalScrollElements,function(){U.setMouseWheelScrolling(!0)}));var J=(new Date).getTime();e(t).on("click touchstart","#pp-nav a",function(t){t.preventDefault();var n=e(this).parent().index();s(e(".pp-section").eq(n))}),e(t).on({mouseenter:function(){var t=e(this).data("tooltip");e('<div class="pp-tooltip '+V.navigation.position+'">'+t+"</div>").hide().appendTo(e(this)).fadeIn(200)},mouseleave:function(){e(this).find(".pp-tooltip").fadeOut(200,function(){e(this).remove()})}},"#pp-nav li")}}(jQuery,document,window),function(){"use strict";function e(e){$("body, html").addClass("pp-inited");var t=$("#pagepiling").find(".section"),n=$.map(t,function(e){return $(e).attr("id")});e.pagepiling({anchors:n,animateAnchor:!1,menu:"#main-menu",navigation:!1,onLeave:function(e,n){var o=$(".js-sidebar-top"),a=$(t.get(n-1)).data("headClass");o.length&&a&&(o.removeClass("sidebar__top_transparent sidebar__top_opaque"),o.addClass(a)),n>1&&$(".nav").removeClass("nav_hide")}})}function t(){var e=$(".js-sidebar-top");e.length&&e.addClass("sidebar__top_opaque")}function n(){var e=$(".js-sidebar-top");if(e.length){var t=$("#pagepiling").find(".section");$(document).on("scroll.header",function(){for(var n=null,o=0,a=t.length;o<a;o++){var i=t[o];if(!(i.getBoundingClientRect().y<=50))break;n=i}n&&(e.removeClass("sidebar__top_transparent sidebar__top_opaque"),e.addClass(n.dataset.headClass))}).trigger("scroll")}}var o=$("#pagepiling");if(!o.length)return t(),void $(".nav").removeClass("nav_hide");"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?n():e(o)}(),function(e,t){"use strict";t(document).ready(function(){t(".js-partner-image").on("click",function(){var n=t(this).data("url");n&&e.open(n)}).hover(function(){console.log("in"),t(this).find("svg").addClass("hover")},function(){console.log("ou"),t(this).find("svg").removeClass("hover")})})}(window,jQuery),$(function(){function e(e){e.preventDefault(),$(this).blur();var t=$(this).closest(".event");t.toggleClass("event_open"),t.hasClass("event_open")?t.find(".event__body").slideDown():t.find(".event__body").slideUp()}function t(e){var t=e.search;"?"===t[0]&&(t=t.substring(1));for(var n={},o=t.split("&"),a=0,i=o.length;a<i;a++){var r=o[a].split("=");n[r[0]]=r[1]}var s="https://www.youtube.com/embed/"+n.v;return n.list&&(s+="?list="+n.list),s}$(".event:not(.event_open) .event__body").hide(),$(".js-schedule-event-toggle").on("click",e);var n=$("#videoDialog"),o=n.find("iframe");n.on("hidden.modal",function(){o.attr("src","")}),$(".js-video-link").on("click",function(e){e.preventDefault();var a=t(this);o.attr("src",a),window._mblt_openModal(n)})}),function(e,t){"use strict";t(document).ajaxSend(function(){NProgress.start()}).ajaxComplete(function(){NProgress.done()}).ajaxError(function(){alert("Something went wrong. Please try again later.")})}(window,jQuery),$(function(){var e=6,t=($(".js-speakers"),$(".js-more-speakers-btn")),n=$(".js-speaker-item");n.length<=e?t.hide():(n.slice(e).hide().addClass("hidden"),t.click(function(o){o.preventDefault(),n.filter(".hidden").slice(0,e).slideDown().removeClass("hidden"),0==n.filter(".hidden").length&&t.fadeOut()}))}),function(e,t){"use strict";t(document).ready(function(){t(".js-subscriber-form").on("ajax:complete",function(){var e=t(this),n=t('<p class="subscribe-success"></p>');n.text(e.data("message")),e.replaceWith(n)})})}(window,jQuery),$(function(){$(".tab-content .tab-content__pane:not(.active)").hide(),$(".tab__link").click(function(){var e=$($(this).data("target"));$(this).closest(".tab").find(".tab__link").removeClass("active"),$(this).addClass("active"),e.closest(".tab-content").find(".tab-content__pane").hide(),e.show()})}),$(function(){var e=$(".js-menu-switch"),t=$(".js-menu-links a"),n="sidebar_open";e.click(function(t){t.preventDefault();var o=$(this).closest(".sidebar");o.hasClass(n)?(e.addClass("collapsed"),o.removeClass(n),$(".nav").addClass("nav_hide")):(e.removeClass("collapsed"),o.addClass(n),$(".nav").removeClass("nav_hide"))}),t.click(function(){$(this).closest(".sidebar").removeClass(n),$(".nav").addClass("nav_hide")})}),function(e,t){"use strict";function n(e,t){C!=e.value&&0!==e.value.length&&(C=e.value,w&&clearTimeout(w),w=setTimeout(t,1e3))}function o(){t(".js-search-user-field").on("change keyup",function(){n(this,a.bind(this))}),t(document).on("click",".js-participants-list .js-remove a",function(e){e.preventDefault();var n=t(this).closest(".js-participant"),o=n.data("id"),a=n.closest(".js-participants-list").data("url");n.hide("fast",function(){n.remove()}),t.ajax(a,{type:"DELETE",data:{id:o}}).done(c)}),t(document).on("change keyup",".js-promo-code-field",function(){n(this,m.bind(this))}),t(document).on("change keyup",".js-facebook-field",function(){n(this,v.bind(this))}),t(document).on("keyup keypress",".js-form-search-users",function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1}),t(document).on("change",".js-product-field",b)}function a(){var e=t(this),n=e.closest("form").prop("action");t.ajax(n,{type:"GET",data:{q:this.value}}).done(i.bind(this))}function i(e){var n=t(".js-search-user-item.js-template"),o=t(".js-search-user-results");o.empty(),t(".js-user-not-exist").toggle(0===e.length);for(var a=0,i=e.length;a<i;a++){var c=r(n,e[a]);t("<li></li>").append(c).appendTo(o)}t(".js-search-user-results li").on("click",function(){var e=t(this),n=t(this).find(".js-search-user-item").data("id"),o=e.parent().data("url");t.ajax(o,{type:"POST",data:{id:n}}).done(s.bind(this))})}function r(e,t){var n=e.clone().removeClass("hidden js-template");return n.data("id",t.RunetId).find(".js-first-name").text(t.FirstName||"").end().find(".js-last-name").text(t.LastName||"").end().find(".js-company").text((t.Work?t.Work.Company.Name+(t.Work.Position?", ":""):null)||"").end().find(".js-position").text((t.Work?t.Work.Position:null)||""),-1==t.Photo.Small.indexOf("nophoto")&&n.find(".js-photo").attr("src",t.Photo.Small).removeAttr("height").next(".js-photo-overlay").removeClass("hidden"),n}function s(){e._mblt_closeModal(t("#addNewDialog")),l()}function c(){l()}function l(){var e=t(".js-participants-list");if(0!==e.length){var n=e.data("url");t.ajax(n,{type:"GET"}).done(u)}}function u(e){d(e.Items),f(e.Items)}function d(e){var n=t(".js-participants-list"),o=n.find(".js-template");n.children().filter(":not(.js-template)").remove(),t(".js-participants-list-header").toggleClass("hidden",0===e.length);for(var a=0,i=e.length;a<i;a++){var r=p(o,e[a]);n.append(r)}}function p(e,n){var o=e.clone().removeClass("hidden js-template"),a=t("<div>"),i=a.text(n.Owner.FirstName).text(),r=a.text(n.Owner.LastName).text(),s=a.text(n.Owner.Work&&n.Owner.Work.Company?n.Owner.Work.Company.Name:"").text(),c=a.text(n.Owner.Work?n.Owner.Work.Position:"").text(),l=[i," ",r];return l=l.concat(s?[", ",s]:[]),o.data("id",n.Id).data("uid",n.Owner.RunetId).find(".js-name").html(l.join("")).end().find(".js-position").html(c).end().find(".js-facebook-field").val(n.facebook).end(),n.Paid?(o.find(".js-product").text(n.Product.Title),n.CouponCode&&o.find(".js-promocode").text(n.CouponCode),o.find(".js-remove").empty()):(o.find(".js-product-field option[value="+n.Product.Id+"]").prop("selected",!0).parent().change(),n.CouponCode&&o.find(".js-promocode").parent().addClass("has-success").end().find(".js-promo-code-field").val(n.CouponCode)),o}function f(e){for(var n=0,o=0,a=e.length;o<a;o++)var n=n+e[o].PriceDiscount;t(".js-total-price-number").text(n)}function m(){var e=t(this),n=e.closest(".js-participant"),o=n.closest(".js-participants-list"),a=o.data("couponUrl"),i={promo_code:this.value,id:n.data("uid")};t.ajax(a,{type:"POST",data:i}).done(h.bind(this))}function h(e){var n=t(this);n.parent().removeClass("has-error has-success"),e.Error&&e.Error.Message?(n.parent().addClass("has-error"),
40301===e.Error.Code?alert("\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u043e \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0430\u043a\u0442\u0438\u0432\u0430\u0446\u0438\u0439 \u043f\u0440\u043e\u043c\u043e\u043a\u043e\u0434\u0430."):40305===e.Error.Code&&alert("\u0421\u0440\u043e\u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u043e\u043c\u043e\u043a\u043e\u0434\u0430 \u0438\u0441\u0442\u0451\u043a.")):l()}function v(){var e=t(this),n=e.closest(".js-participant"),o=n.closest(".js-participants-list"),a=o.data("facebookUrl"),i={facebook:this.value,id:n.data("uid")};t.ajax(a,{type:"POST",data:i}).done(g.bind(this))}function g(){l()}function b(){var e=t(this),n=e.closest(".js-participant"),o=n.closest(".js-participants-list"),a=o.data("productUrl"),i={pid:e.val(),oid:n.data("id"),uid:n.data("uid")};t.ajax(a,{type:"POST",data:i}).done(y.bind(this))}function y(){l()}var w=null,C=null;t(document).ready(function(){l(),o()})}(window,jQuery),function(e){"use strict";function t(e,n){if(!(this instanceof t)){var o=new t(e,n);return o.open(),o}this.id=t.id++,this.setup(e,n),this.chainCallbacks(t._callbackChain)}function n(e,t){var n={};for(var o in e)o in t&&(n[o]=e[o],delete e[o]);return n}function o(e,t){var n={},o=new RegExp("^"+t+"([A-Z])(.*)");for(var a in e){var i=a.match(o);if(i){n[(i[1]+i[2].replace(/([A-Z])/g,"-$1")).toLowerCase()]=e[a]}}return n}if(void 0===e)return void("console"in window&&window.console.info("Too much lightness, Featherlight needs jQuery."));if(e.fn.jquery.match(/-ajax/))return void("console"in window&&window.console.info("Featherlight needs regular jQuery, not the slim version."));var a=[],i=function(t){return a=e.grep(a,function(e){return e!==t&&e.$instance.closest("body").length>0})},r={allow:1,allowfullscreen:1,frameborder:1,height:1,longdesc:1,marginheight:1,marginwidth:1,mozallowfullscreen:1,name:1,referrerpolicy:1,sandbox:1,scrolling:1,src:1,srcdoc:1,style:1,webkitallowfullscreen:1,width:1},s={keyup:"onKeyUp",resize:"onResize"},c=function(n){e.each(t.opened().reverse(),function(){return n.isDefaultPrevented()||!1!==this[s[n.type]](n)?void 0:(n.preventDefault(),n.stopPropagation(),!1)})},l=function(n){if(n!==t._globalHandlerInstalled){t._globalHandlerInstalled=n;var o=e.map(s,function(e,n){return n+"."+t.prototype.namespace}).join(" ");e(window)[n?"on":"off"](o,c)}};t.prototype={constructor:t,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!1,otherClose:null,beforeOpen:e.noop,beforeContent:e.noop,beforeClose:e.noop,afterOpen:e.noop,afterContent:e.noop,afterClose:e.noop,onKeyUp:e.noop,onResize:e.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(t,n){"object"!=typeof t||t instanceof e!=0||n||(n=t,t=void 0);var o=e.extend(this,n,{target:t}),a=o.resetCss?o.namespace+"-reset":o.namespace,i=e(o.background||['<div class="'+a+"-loading "+a+'">','<div class="'+a+'-content">','<button class="'+a+"-close-icon "+o.namespace+'-close" aria-label="Close">',o.closeIcon,"</button>",'<div class="'+o.namespace+'-inner">'+o.loading+"</div>","</div>","</div>"].join("")),r="."+o.namespace+"-close"+(o.otherClose?","+o.otherClose:"");return o.$instance=i.clone().addClass(o.variant),o.$instance.on(o.closeTrigger+"."+o.namespace,function(t){if(!t.isDefaultPrevented()){var n=e(t.target);("background"===o.closeOnClick&&n.is("."+o.namespace)||"anywhere"===o.closeOnClick||n.closest(r).length)&&(o.close(t),t.preventDefault())}}),this},getContent:function(){if(!1!==this.persist&&this.$content)return this.$content;var t=this,n=this.constructor.contentFilters,o=function(e){return t.$currentTarget&&t.$currentTarget.attr(e)},a=o(t.targetAttr),i=t.target||a||"",r=n[t.type];if(!r&&i in n&&(r=n[i],i=t.target&&a),i=i||o("href")||"",!r)for(var s in n)t[s]&&(r=n[s],i=t[s]);if(!r){var c=i;if(i=null,e.each(t.contentFilters,function(){return r=n[this],r.test&&(i=r.test(c)),!i&&r.regex&&c.match&&c.match(r.regex)&&(i=c),!i}),!i)return"console"in window&&window.console.error("Featherlight: no content filter found "+(c?' for "'+c+'"':" (no target specified)")),!1}return r.process.call(t,i)},setContent:function(t){return this.$instance.removeClass(this.namespace+"-loading"),this.$instance.toggleClass(this.namespace+"-iframe",t.is("iframe")),this.$instance.find("."+this.namespace+"-inner").not(t).slice(1).remove().end().replaceWith(e.contains(this.$instance[0],t[0])?"":t),this.$content=t.addClass(this.namespace+"-inner"),this},open:function(t){var n=this;if(n.$instance.hide().appendTo(n.root),!(t&&t.isDefaultPrevented()||!1===n.beforeOpen(t))){t&&t.preventDefault();var o=n.getContent();if(o)return a.push(n),l(!0),n.$instance.fadeIn(n.openSpeed),n.beforeContent(t),e.when(o).always(function(e){n.setContent(e),n.afterContent(t)}).then(n.$instance.promise()).done(function(){n.afterOpen(t)})}return n.$instance.detach(),e.Deferred().reject().promise()},close:function(t){var n=this,o=e.Deferred();return!1===n.beforeClose(t)?o.reject():(0===i(n).length&&l(!1),n.$instance.fadeOut(n.closeSpeed,function(){n.$instance.detach(),n.afterClose(t),o.resolve()})),o.promise()},resize:function(e,t){if(e&&t){this.$content.css("width","").css("height","");var n=Math.max(e/(this.$content.parent().width()-1),t/(this.$content.parent().height()-1));n>1&&(n=t/Math.floor(t/n),this.$content.css("width",e/n+"px").css("height",t/n+"px"))}},chainCallbacks:function(t){for(var n in t)this[n]=e.proxy(t[n],this,e.proxy(this[n],this))}},e.extend(t,{id:0,autoBind:"[data-featherlight]",defaults:t.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(t){return t instanceof e&&t},process:function(t){return!1!==this.persist?e(t):e(t).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff?|bmp|svg)(\?\S*)?$/i,process:function(t){var n=this,o=e.Deferred(),a=new Image,i=e('<img src="'+t+'" alt="" class="'+n.namespace+'-image" />');return a.onload=function(){i.naturalWidth=a.width,i.naturalHeight=a.height,o.resolve(i)},a.onerror=function(){o.reject(i)},a.src=t,o.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(t){return e(t)}},ajax:{regex:/./,process:function(t){var n=e.Deferred(),o=e("<div></div>").load(t,function(e,t){"error"!==t&&n.resolve(o.contents()),n.fail()});return n.promise()}},iframe:{process:function(t){var a=new e.Deferred,i=e("<iframe/>"),s=o(this,"iframe"),c=n(s,r);return i.hide().attr("src",t).attr(c).css(s).on("load",function(){a.resolve(i.show())}).appendTo(this.$instance.find("."+this.namespace+"-content")),a.promise()}},text:{process:function(t){return e("<div>",{text:t})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(t,n){var o=this,a=new RegExp("^data-"+n+"-(.*)"),i={};return t&&t.attributes&&e.each(t.attributes,function(){var t=this.name.match(a);if(t){var n=this.value,r=e.camelCase(t[1]);if(e.inArray(r,o.functionAttributes)>=0)n=new Function(n);else try{n=JSON.parse(n)}catch(e){}i[r]=n}}),i},extend:function(t,n){var o=function(){this.constructor=t};return o.prototype=this.prototype,t.prototype=new o,t.__super__=this.prototype,e.extend(t,this,n),t.defaults=t.prototype,t},attach:function(t,n,o){var a=this;"object"!=typeof n||n instanceof e!=0||o||(o=n,n=void 0),o=e.extend({},o);var i,r=o.namespace||a.defaults.namespace,s=e.extend({},a.defaults,a.readElementConfig(t[0],r),o),c=function(r){var c=e(r.currentTarget),l=e.extend({$source:t,$currentTarget:c},a.readElementConfig(t[0],s.namespace),a.readElementConfig(r.currentTarget,s.namespace),o),u=i||c.data("featherlight-persisted")||new a(n,l);"shared"===u.persist?i=u:!1!==u.persist&&c.data("featherlight-persisted",u),l.$currentTarget.blur&&l.$currentTarget.blur(),u.open(r)};return t.on(s.openTrigger+"."+s.namespace,s.filter,c),{filter:s.filter,handler:c}},current:function(){var e=this.opened();return e[e.length-1]||null},opened:function(){var t=this;return i(),e.grep(a,function(e){return e instanceof t})},close:function(e){var t=this.current();return t?t.close(e):void 0},_onReady:function(){var t=this;if(t.autoBind){var n=e(t.autoBind);n.each(function(){t.attach(e(this))}),e(document).on("click",t.autoBind,function(o){if(!o.isDefaultPrevented()){var a=e(o.currentTarget),i=n.length;if(n=n.add(a),i!==n.length){var r=t.attach(a);(!r.filter||e(o.target).parentsUntil(a,r.filter).length>0)&&r.handler(o)}}})}},_callbackChain:{onKeyUp:function(t,n){return 27===n.keyCode?(this.closeOnEsc&&e.featherlight.close(n),!1):t(n)},beforeOpen:function(t,n){return e(document.documentElement).addClass("with-featherlight"),this._previouslyActive=document.activeElement,this._$previouslyTabbable=e("a, input, select, textarea, iframe, button, iframe, [contentEditable=true]").not("[tabindex]").not(this.$instance.find("button")),this._$previouslyWithTabIndex=e("[tabindex]").not('[tabindex="-1"]'),this._previousWithTabIndices=this._$previouslyWithTabIndex.map(function(t,n){return e(n).attr("tabindex")}),this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr("tabindex",-1),document.activeElement.blur&&document.activeElement.blur(),t(n)},afterClose:function(n,o){var a=n(o),i=this;return this._$previouslyTabbable.removeAttr("tabindex"),this._$previouslyWithTabIndex.each(function(t,n){e(n).attr("tabindex",i._previousWithTabIndices[t])}),this._previouslyActive.focus(),0===t.opened().length&&e(document.documentElement).removeClass("with-featherlight"),a},onResize:function(e,t){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),e(t)},afterContent:function(e,t){var n=e(t);return this.$instance.find("[autofocus]:not([disabled])").focus(),this.onResize(t),n}}}),e.featherlight=t,e.fn.featherlight=function(e,n){return t.attach(this,e,n),this},e(document).ready(function(){t._onReady()})}(jQuery);